# JSON Formatter Chrome 扩展

一个 Chrome 浏览器扩展，旨在自动格式化和美化直接在浏览器中打开的 JSON 数据，使其更易于阅读和理解。

## 功能

- **自动 JSON 检测**:
  - 检测 `Content-Type` 为 `application/json` 的页面。
  - 分析页面内容，以识别和格式化嵌入在 `<pre>` 标签中或作为主要文本内容的 JSON 数据。
  - 通过监听网络请求，处理动态加载的 JSON 内容。
- **代码美化与语法高亮**:
  - 将原始 JSON 数据解析并重新格式化，采用标准的两空格缩进。
  - 使用 [Prism.js](https://prismjs.com/) 对 JSON 数据进行语法高亮，提高可读性。
- **行号显示**: 在格式化后的 JSON旁边显示行号，方便定位和引用。
- **自定义样式**: 应用简洁的样式以优化 JSON 数据的展示。
- **避免重复处理**: 包含防止对同一内容进行多次格式化的机制。
- **广泛适用性**: 设计用于在所有网站上工作。

## 依赖

- [Prism.js](https://prismjs.com/): 一个轻量级、可扩展的语法高亮库。
  - `prism.min.css`
  - `prism.min.js`
  - `prism-json.min.js` (Prism.js 的 JSON 语言定义)

## 如何工作

1. **内容脚本 (`content.js`)**:
    - 在页面加载完成后运行，检查页面的 `Content-Type`。
    - 如果页面内容看起来像 JSON（例如，包裹在 `<pre>` 标签内或符合 JSON 结构），则尝试解析和格式化。
    - 接收来自后台脚本的通知以处理通过网络请求加载的 JSON。
    - 如果检测到有效的 JSON，它会清空当前文档，并注入一个新的 HTML 结构，其中包含使用 Prism.js 高亮显示的格式化 JSON。

2. **后台脚本 (`background.js`)**:
    - 监听所有网络请求的响应头。
    - 如果响应的 `Content-Type` 指明是 JSON，它会向相应标签页的内容脚本发送消息，触发 JSON 格式化流程。

## 安装

1. 下载此项目的代码库或将其克隆到本地计算机。
2. 打开 Chrome 浏览器，导航到 `chrome://extensions`。
3. 确保右上角的 "开发者模式 (Developer mode)" 开关已启用。
4. 点击 "加载已解压的扩展程序 (Load unpacked)" 按钮。
5. 在文件选择对话框中，选择包含此项目文件（例如 `manifest.json` 所在的目录）的文件夹。
6. 扩展程序 "JSON Formatter" 现在应该已安装并处于活动状态。

## 使用方法

安装扩展程序后，它会自动在您浏览到包含原始 JSON 数据的页面时生效。无需任何手动操作，JSON 内容将被自动格式化和高亮显示。
